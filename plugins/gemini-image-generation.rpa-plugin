{
  "packageInfo": {
    "name": "Gemini Image Generation",
    "version": "1.0.0",
    "type": "rpa-plugin"
  },
  "files": {
    "plugin.json": "{\n  \"id\": \"plugin-gemini-image-generation\",\n  \"name\": \"Gemini Image Generation\",\n  \"description\": \"Use google's \\\"Nano Banana\\\" to generate images\",\n  \"longDescription\": \"Use google's \\\"Nano Banana\\\" to generate images. In order to use the service, the user should having a gemini api key to get start. Please follow the instructions in the link to get one: https://aistudio.google.com/app/api-keys\",\n  \"category\": [\n    \"AI\",\n    \"Image Processing\"\n  ],\n  \"version\": \"1.0.0\",\n  \"author\": \"AgentOuro\",\n  \"type\": \"pluginNode\",\n  \"nodeType\": \"pluginNode\",\n  \"color\": \"#6b7280\",\n  \"createdAt\": \"2025-09-04T04:43:17.118Z\",\n  \"updatedAt\": \"2025-10-09T05:44:35.604Z\",\n  \"inputFields\": [\n    {\n      \"id\": \"field_1756960967082\",\n      \"type\": \"text\",\n      \"label\": \"Input 1\",\n      \"variableName\": \"api_key\",\n      \"required\": true,\n      \"defaultValue\": null\n    },\n    {\n      \"id\": \"field_1756960972693\",\n      \"type\": \"text\",\n      \"label\": \"Input 2\",\n      \"variableName\": \"prompt\",\n      \"required\": true,\n      \"defaultValue\": null\n    }\n  ],\n  \"outputFields\": [\n    {\n      \"id\": \"output_1756960981527\",\n      \"type\": \"image\",\n      \"label\": \"Output 1\",\n      \"variableName\": \"result\"\n    }\n  ],\n  \"globalVariableAccess\": []\n}",
    "index.py": "\"\"\"\nPlugin: Gemini Image Generation\nDescription: Use google's \"Nano Banana\" to generate images\nGenerated by RPA Plugin Builder\n\"\"\"\n\n# Plugin execution code\n\"\"\"\nPlugin: Gemini Image Generator\nDescription: Generate an image from a text prompt using Google's Gemini model\nGenerated by RPA Plugin Builder\n\"\"\"\n\ndef run(inputs, ctx):\n    \"\"\"\n    Gemini 2.5 Flash â€” image generation\n    \n    Required inputs:\n      - api_key (string): Google Generative Language API key\n      - prompt  (string): Text describing the image to generate\n    \n    Returns:\n      - result (image): Generated image as base64 string\n    \"\"\"\n    import base64\n    from io import BytesIO\n    from google import genai\n    from google.genai import types\n    from PIL import Image\n\n    api_key = (inputs.get('api_key') or '').strip()\n    prompt  = (inputs.get('prompt') or '').strip()\n\n    # ---- Validate ----\n    missing = []\n    if not api_key: missing.append(\"api_key\")\n    if not prompt:  missing.append(\"prompt\")\n    if missing:\n        raise ValueError(f\"Missing required inputs: {', '.join(missing)}\")\n\n    # ---- Initialize Gemini client ----\n    client = genai.Client(api_key=api_key)\n\n    # ---- Request generation ----\n    response = client.models.generate_content(\n        model=\"gemini-2.5-flash-image-preview\",\n        contents=prompt,\n    )\n\n    # ---- Extract image parts ----\n    image_parts = []\n    if response.candidates and len(response.candidates) > 0:\n        candidate = response.candidates[0]\n        if hasattr(candidate, 'content') and hasattr(candidate.content, 'parts'):\n            for part in candidate.content.parts:\n                if hasattr(part, 'inline_data') and part.inline_data:\n                    image_parts.append(part.inline_data.data)\n\n    if not image_parts:\n        raise RuntimeError(\"Gemini returned no image data\")\n\n    # ---- Convert first image result ----\n    result_image = Image.open(BytesIO(image_parts[0]))\n\n    output_buffer = BytesIO()\n    result_image.save(output_buffer, format=\"PNG\")\n    output_buffer.seek(0)\n\n    result_base64 = base64.b64encode(output_buffer.read()).decode(\"utf-8\")\n\n    ctx.log(\"Gemini image generation succeeded\")\n    return {\n        \"result\": result_base64\n    }\n"
  }
}